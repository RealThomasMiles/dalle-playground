(this["webpackJsonpdalle-playground"]=this["webpackJsonpdalle-playground"]||[]).push([[0],{117:function(e,t,n){},127:function(e,t){},154:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(9),c=n.n(i),o=(n(86),n(12)),s=n(14),l=n.n(s),u=n(181),d=n(182),m=n(183),p=n(35),g=n.n(p),f=n(56);n(88);function h(){return(h=Object(f.a)(g.a.mark((function e(t){var n,a;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new Date,e.t0=Promise,e.next=4,fetch("https://bf.dallemini.ai/generate",{method:"POST",mode:"cors",headers:{"Content-Type":"application/json"},body:JSON.stringify({prompt:t})}).then((function(e){if(!e.ok)throw Error(e.statusText);return e}));case 4:return e.t1=e.sent.json(),e.t2=new Promise((function(e,t){return setTimeout((function(){return t(new Error("Timeout"))}),6e4)})),e.t3=[e.t1,e.t2],e.next=9,e.t0.race.call(e.t0,e.t3);case 9:return a=e.sent,console.log(a),e.abrupt("return",{executionTime:Math.round(100*((new Date-n)/1e3+Number.EPSILON))/100,generatedImgs:a.images});case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function b(){return(b=Object(f.a)(g.a.mark((function e(t){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t,{headers:{"Bypass-Tunnel-Reminder":"go",mode:"no-cors"}}).then((function(e){return!0})).catch((function(){return!1}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var x=n(179),E=l()((function(){return{generatedImg:{borderRadius:"8px"}}}))((function(e){var t=e.classes,n=e.generatedImages,a=function(e){var n=e.imgData,a=e.alt;return r.a.createElement("img",{src:"data:image/png;base64,".concat(n),className:t.generatedImg,alt:a})};return r.a.createElement(x.a,{container:!0,alignItems:"center",spacing:3},n.map((function(e,t){return r.a.createElement(x.a,{item:!0,key:t},r.a.createElement(a,{imgData:e,alt:t}))})))})),v=n(184),y=l()((function(){return{inputPrompt:{marginTop:"20px"}}}))((function(e){var t=e.classes,n=e.enterPressedCallback,i=e.disabled,c=Object(a.useState)(""),s=Object(o.a)(c,2),l=s[0],u=s[1];return r.a.createElement(v.a,{className:t.inputPrompt,id:"prompt-input",label:"Text prompt",helperText:"hit Enter to generate images",placeholder:"e.g. an apple on a table",value:l,onChange:function(e){u(e.target.value)},fullWidth:!0,onKeyPress:function(e){"Enter"===e.key&&n(l)},disabled:i})}));n(117);var j=n(46),O=n(75),k=n.n(O),w=(l()((function(){return{inputBackend:{minWidth:"220px"},loadingSpinner:{paddingTop:"20px !important"}}}))((function(e){var t=e.classes,n=e.disabled,i=e.setBackendValidUrl,c=e.isValidBackendEndpoint,s=e.setIsValidBackendEndpoint,l=e.isCheckingBackendEndpoint,u=e.setIsCheckingBackendEndpoint,d=Object(a.useState)(""),m=Object(o.a)(d,2),p=m[0],g=m[1];function f(e){var t;t=e,new RegExp("^(https?:\\/\\/)?((([a-z\\d]([a-z\\d-]*[a-z\\d])*)\\.)+[a-z]{2,}|((\\d{1,3}\\.){3}\\d{1,3}))(\\:\\d+)?(\\/[-a-z\\d%_.~+]*)*(\\?[;&a-z\\d%_.~+=-]*)?(\\#[-a-z\\d_]*)?$","i").test(t)?(u(!0),function(e){return b.apply(this,arguments)}(e).then((function(t){s(t),t&&i(e),u(!1)})).catch((function(){u(!1)}))):s(!1),g(e)}return Object(a.useEffect)((function(){var e=k.a.parse(window.location.search,{ignoreQueryPrefix:!0}).backendUrl;e&&f(e)}),[g]),r.a.createElement(x.a,{container:!0,spacing:1,alignContent:"center"},r.a.createElement(x.a,{item:!0,xs:10},r.a.createElement(v.a,{className:t.inputBackend,fullWidth:!0,id:"standard-basic",label:"Backend URL",value:p,disabled:n,error:!c&&""!==p,helperText:!c&&""!==p&&"No running DALL-E server with this URL",onChange:function(e){return f(e.target.value)}})),l&&r.a.createElement(x.a,{item:!0,className:t.loadingSpinner,xs:2},r.a.createElement(j.PulseLoader,{sizeUnit:"px",size:5,color:"purple",loading:l})))})),["Generating images \ud83d\udc68\ud83c\udffd\u200d\ud83c\udfa8","Doing fancy calculations \u2728"]),T=l()((function(){return{root:{display:"flex",flexDirection:"column",textAlign:"center",marginTop:"80px"},loadingText:{paddingTop:"20px"}}}))((function(e){var t=e.classes,n=e.isLoading,i=Object(a.useState)(0),c=Object(o.a)(i,2),s=c[0],l=c[1];Object(a.useEffect)((function(){var e=setTimeout((function(){s+1<w.length&&l(s+1)}),1e4);return function(){return clearInterval(e)}}),[]);var d=w[s%w.length];return r.a.createElement("div",{className:t.root},r.a.createElement(j.PulseLoader,{sizeUnit:"px",size:20,color:"purple",loading:n}),r.a.createElement(u.a,{className:t.loadingText,variant:"h6"},d))})),S=l()((function(){return{root:{display:"flex",width:"100%",flexDirection:"column",margin:"60px 0px 60px 0px",alignItems:"center",textAlign:"center"},title:{marginBottom:"20px"},playgroundSection:{display:"flex",flex:1,width:"100%",alignItems:"flex-start",justifyContent:"center",marginTop:"20px"},settingsSection:{display:"flex",flexDirection:"column",padding:"1em",maxWidth:"300px"},searchQueryCard:{marginBottom:"20px"},imagesPerQueryControl:{marginTop:"20px"},formControl:{margin:"20px",minWidth:120},gallery:{display:"flex",flex:"1",maxWidth:"50%",height:"100%",justifyContent:"center",alignItems:"flex-start",padding:"1rem"}}}))((function(e){var t=e.classes,n=Object(a.useState)(""),i=Object(o.a)(n,2),c=(i[0],i[1],Object(a.useState)(!1)),s=Object(o.a)(c,2),l=s[0],p=s[1],g=Object(a.useState)(!1),f=Object(o.a)(g,2),b=(f[0],f[1],Object(a.useState)(!0)),x=Object(o.a)(b,2),v=(x[0],x[1],Object(a.useState)([])),j=Object(o.a)(v,2),O=j[0],k=j[1],w=Object(a.useState)(""),S=Object(o.a)(w,2),L=S[0],C=S[1],D=Object(a.useState)(2),I=Object(o.a)(D,2),N=(I[0],I[1],Object(a.useState)(0)),P=Object(o.a)(N,2),B=P[0],z=P[1];return r.a.createElement("div",{className:t.root},r.a.createElement("div",{className:t.title},r.a.createElement(u.a,{variant:"h3"},"DALL-E Playground ",r.a.createElement("span",{role:"img","aria-label":"sparks-emoji"},"\u2728"),r.a.createElement("br",null),"(for DAMGDegen by ThomasMiles)")),r.a.createElement("div",{className:t.playgroundSection},r.a.createElement("div",{className:t.settingsSection},r.a.createElement(d.a,{className:t.searchQueryCard},r.a.createElement(m.a,null,r.a.createElement(y,{enterPressedCallback:function(e){console.log("API call to DALL-E web service with the following prompt ["+e+"]"),C(""),p(!0),function(e){return h.apply(this,arguments)}(e).then((function(e){z(e.executionTime),k(e.generatedImgs),p(!1)})).catch((function(e){console.log("Error querying DALL-E service.",e),"Timeout"===e.message?C("Timeout querying DALL-E service (>1min). Consider reducing the images per query or use a stronger backend."):C("Error querying DALL-E service. Check your backend server logs."),p(!1)}))},disabled:l}))),0!==B&&r.a.createElement(u.a,{variant:"body2",color:"textSecondary"},"Query execution time: ",B," sec")),(O.length>0||L||l)&&r.a.createElement("div",{className:t.gallery},L?r.a.createElement(u.a,{variant:"h5",color:"error"},L):l?r.a.createElement(T,{isLoading:l}):r.a.createElement(E,{generatedImages:O}))))}));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(S,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},81:function(e,t,n){e.exports=n(154)},86:function(e,t,n){}},[[81,1,2]]]);
//# sourceMappingURL=main.e5cdf028.chunk.js.map